<div id="announcement-bar" class="announcement-static">
  <div class="announcement-inner">
    <div class="ann-slider">
      <div id="ann-sliderWrapper">
        {% if section.blocks.size > 0 %}
          {% for block in section.blocks %}
            <div class="ann-slide" {{ block.shopify_attributes }}>
              <p class="announcement-text">
                {{ block.settings.text | escape }}
                {% if block.settings.show_link and block.settings.link_url != blank %}
                  <a href="{{ block.settings.link_url }}" class="announcement-link">
                    {{ block.settings.link_text | default: 'SHOP NOW' | escape }}
                  </a>
                {% endif %}
              </p>
            </div>
          {% endfor %}
        {% else %}
          <div class="ann-slide">
            <p class="announcement-text">
              {{ section.settings.banner_text | escape }}
              {% if section.settings.show_link and section.settings.link_url != blank %}
                <a href="{{ section.settings.link_url }}" class="announcement-link">
                  {{ section.settings.link_text | default: 'SHOP NOW' | escape }}
                </a>
              {% endif %}
            </p>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>

<style>
  /* 1) Set a fixed height and expose it as --bar-h for the header */
  :root {
    --bar-h: 50px;
  } /* 2) Fixed bar at very top */
  #announcement-bar.announcement-static {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: var(--bar-h);
    z-index: 40;
    background: #d6d2c4;
    border-bottom: 1px solid rgba(33, 35, 34, 0.2);
    transform: translateY(var(--header-shift, 0px));
  } /* 3) Simple centering */
  #announcement-bar .announcement-inner {
    max-width: 700px;
    margin: 0 auto;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 8px 12px;
  } /* 4) Readable text, no surprises */
  #announcement-bar .announcement-text,
  #announcement-bar .announcement-link {
    color: #212322 !important;
  }
  #announcement-bar .announcement-text {
    margin: 0;
    font-size: 11px;
    text-transform: uppercase;
    line-height: 1.2;
    text-align: center;
  }
  #announcement-bar .announcement-link {
    margin-left: 4px;
    text-decoration: underline;
    opacity: 0.8;
  }
  #announcement-bar .announcement-link:hover {
    opacity: 1;
  }

  /* Slider layout: no movement yet */
  .ann-slider {
    overflow: hidden; /* hide extra slides */
    position: relative;
    height: 100%;
  }
  #ann-sliderWrapper {
    display: flex; /* horizontal strip of slides */
    align-items: center;
    height: 100%;
    /* no transform yet – we’ll add it in Step 3 */
  }
  .ann-slide {
    flex: 0 0 100%; /* each slide takes full width */
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
  }
</style>
{% schema %}
{
  "name": "Announcement bar (static)",
  "settings": [
    {
      "type": "text",
      "id": "banner_text",
      "label": "Banner text",
      "default": "FREE SHIPPING ON ORDERS $40+"
    },
    {
      "type": "checkbox",
      "id": "show_link",
      "label": "Show link",
      "default": true
    },
    {
      "type": "url",
      "id": "link_url",
      "label": "Link URL",
      "info": "Shown only when “Show link” is enabled."
    },
    {
      "type": "text",
      "id": "link_text",
      "label": "Link text",
      "default": "SHOP NOW"
    }
  ],

  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        { "type": "text", "id": "text", "label": "Banner text", "default": "FREE SHIPPING ON ORDERS $40+" },
        { "type": "checkbox", "id": "show_link", "label": "Show link", "default": true },
        { "type": "url", "id": "link_url", "label": "Link URL" },
        { "type": "text", "id": "link_text", "label": "Link text", "default": "SHOP NOW" }
      ]
    }
  ],
  "max_blocks": 5,
  "presets": [
    {
      "name": "Announcement bar (static)",
      "blocks": [
        {
          "type": "slide",
          "settings": {
            "text": "FREE SHIPPING ON ORDERS $40+",
            "show_link": true,
            "link_text": "SHOP NOW",
            "link_url": "/collections/shop-all"
          }
        }
      ]
    }
  ]
}
{% endschema %}
